p8105\_hw6\_cac2225
================
Courtney Chan
November 26, 2018

Homework 6
==========

Problem 0
---------

A github repo and local R project was created, an Rmd file was produced, knitted, and committed to github.

Problem 1
---------

First loading all necessary packages

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts ---------------------
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(rvest)
```

    ## Loading required package: xml2

    ## 
    ## Attaching package: 'rvest'

    ## The following object is masked from 'package:purrr':
    ## 
    ##     pluck

    ## The following object is masked from 'package:readr':
    ## 
    ##     guess_encoding

``` r
library(readr)
library(stringr)
```

The csv file is imported using the read\_csv function and the dataset is cleaned.

``` r
homicide = read_csv("./data/homicide-data.csv") %>% 
  janitor::clean_names()
```

    ## Parsed with column specification:
    ## cols(
    ##   uid = col_character(),
    ##   reported_date = col_integer(),
    ##   victim_last = col_character(),
    ##   victim_first = col_character(),
    ##   victim_race = col_character(),
    ##   victim_age = col_character(),
    ##   victim_sex = col_character(),
    ##   city = col_character(),
    ##   state = col_character(),
    ##   lat = col_double(),
    ##   lon = col_double(),
    ##   disposition = col_character()
    ## )

A city\_state variable is created using the functions paste and mutate. Also a "solved" variable is created to indicate which cases have or have not been solved based on homework 5's prompt. The number of unsolved homicides is defined as those for which the disposition is “Closed without arrest” or “Open/No arrest”). City\_states Dallas, TX, Pheonix, AZ, Kansas City, MO and Tulsa, AL are filtered out of the dataset.

``` r
homicide = homicide %>% 
  mutate(city_state = paste(city,",",state)) %>%   
  mutate(solved = recode(disposition, "Closed without arrest" = "Unsolved", "Open/No arrest" = "Unsolved", "Closed by arrest" = "Solved")) %>% 
  filter(city_state != "Dallas , TX", city_state != "Pheonix , AZ", city_state != "Kansas City , MO", city_state != "Tulsa , AL")
```

The victim race variable is modified to be binary and for the catagory "White" to be defined as the reference catagory. Hispanic, Asian, Black, Other and Unknown were coded as "Non-white".

``` r
homicide = homicide %>% 
  mutate(victim_race = recode(victim_race, "Black" = "Non-white", "Hispanic" = "Non-white", "Asian" = "Non-white", "Other" = "Non-white", "Unknown" = "Non-white")) %>%  mutate(victim_race = factor(victim_race, levels = c("White", "Non-white")))

is.factor(homicide$victim_race)
```

    ## [1] TRUE

Victim\_age is first checked to see whether it is a numeric variable. Since it is not, the "unknown" category is first recoded as "NA". Then victim\_age is defined as a numeric variable. It is checked again to see whether it was converted successfully into an numeric variable.

``` r
is.numeric(homicide$victim_age)
```

    ## [1] FALSE

``` r
homicide = homicide %>% 
  mutate(victim_age = recode(victim_age, "Unknown" = "NA")) %>% mutate(victim_age = as.numeric(factor(victim_age)))

is.numeric(homicide$victim_age)
```

    ## [1] TRUE

Problem 2
---------
